<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>AI Mobile OS</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background: #f0f0f0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
.glass-card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border-radius: 24px; }
.app-icon { width: 60px; height: 60px; background: white; border-radius: 15px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.chat-msg-user { background: #95ec69; border-radius: 6px 0 6px 6px; }
.chat-msg-ai { background: white; border-radius: 0 6px 6px 6px; }

.widget-card{
width:100%;
border-radius:28px;
padding:20px;
background:linear-gradient(135deg,#ffffff,#f3f4f6);
box-shadow:0 8px 20px rgba(0,0,0,0.08);
position:relative;
}

.widget-avatar{
width:60px;height:60px;border-radius:50%;object-fit:cover;
border:3px solid white;box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

.widget-emoji{font-size:14px;cursor:pointer;}
.widget-text{
position:absolute;bottom:15px;right:20px;
font-size:12px;color:#555;cursor:pointer;
}

/* å‘å¸–ç•Œé¢ */
.post-textarea{
width:100%;
border:none;
outline:none;
resize:none;
font-size:16px;
}

.post-btn{
background:#eeeeee;
padding:6px 14px;
border-radius:12px;
font-size:14px;
color:#333333;
}

.post-btn span{
color:#333333;
font-weight:600;
}

.preview-img{
width:80px;
height:80px;
object-fit:cover;
border-radius:12px;
}
</style>
</head>

<body class="h-screen overflow-hidden flex flex-col">

<!-- è®ºå›ç•Œé¢ -->
<div id="forum-screen" class="fixed inset-0 bg-white flex flex-col z-40">

<div class="h-12 bg-white flex items-center px-4 border-b relative">
<button onclick="closeForum()" class="text-xl">ã€ˆ</button>
<div class="flex-1 text-center font-bold">è®ºå›</div>
<button onclick="generateForumPosts()" class="absolute right-4 text-xl">ğŸ”„</button>
</div>

<div id="forum-flow" class="flex-1 overflow-y-auto p-4 space-y-4"></div>

<button onclick="openPostScreen()"
class="fixed bottom-24 right-6 w-14 h-14 bg-black text-white text-3xl rounded-full shadow-lg flex items-center justify-center">
+
</button>

</div>

<!-- å…¨å±å‘å¸–ç•Œé¢ -->
<div id="post-screen" class="fixed inset-0 bg-white hidden flex flex-col z-50">

<div class="h-12 flex items-center px-4 border-b">
<button onclick="closePostScreen()">å–æ¶ˆ</button>
<div class="flex-1"></div>
<button onclick="submitPost()" class="post-btn">
<span>å‘å¸ƒ</span>
</button>
</div>

<div class="flex-1 p-4 overflow-y-auto">
<textarea id="post-content" class="post-textarea" rows="5" placeholder="è¯´ç‚¹ä»€ä¹ˆå§..."></textarea>

<div id="image-preview" class="flex gap-3 flex-wrap mt-4"></div>

<input type="file" id="image-input" accept="image/*" multiple class="hidden" onchange="handleImageUpload(event)">
</div>

<div class="p-4 border-t">
<button onclick="document.getElementById('image-input').click()"
class="w-full py-2 bg-gray-100 rounded-xl">
ğŸ“· æ·»åŠ å›¾ç‰‡
</button>
</div>

</div>

<script>
let forumPosts=[];
let selectedImages=[];

/* æ‰“å¼€å‘å¸–ç•Œé¢ */
function openPostScreen(){
document.getElementById("post-screen").classList.remove("hidden");
}

/* å…³é—­å‘å¸– */
function closePostScreen(){
document.getElementById("post-screen").classList.add("hidden");
document.getElementById("post-content").value="";
document.getElementById("image-preview").innerHTML="";
selectedImages=[];
}

/* å›¾ç‰‡ä¸Šä¼  */
function handleImageUpload(event){
const files=event.target.files;
for(let file of files){
const reader=new FileReader();
reader.onload=function(e){
selectedImages.push(e.target.result);
renderPreview();
};
reader.readAsDataURL(file);
}
}

/* æ¸²æŸ“å›¾ç‰‡é¢„è§ˆ */
function renderPreview(){
const container=document.getElementById("image-preview");
container.innerHTML="";
selectedImages.forEach(img=>{
const image=document.createElement("img");
image.src=img;
image.className="preview-img";
container.appendChild(image);
});
}

/* å‘å¸ƒå¸–å­ */
function submitPost(){
const content=document.getElementById("post-content").value.trim();
if(!content && selectedImages.length===0){
alert("å†…å®¹ä¸èƒ½ä¸ºç©º");
return;
}
forumPosts.unshift({
title:"ç”¨æˆ·å‘å¸ƒ",
content:content,
images:[...selectedImages]
});
renderForum();
closePostScreen();
}

/* æ¸²æŸ“è®ºå› */
function renderForum(){
const container=document.getElementById("forum-flow");
container.innerHTML="";
forumPosts.forEach(post=>{
const div=document.createElement("div");
div.className="p-4 bg-gray-100 rounded-xl shadow-sm";
let imgHtml="";
if(post.images){
post.images.forEach(img=>{
imgHtml+=`<img src="${img}" class="mt-2 w-full rounded-xl">`;
});
}
div.innerHTML=`
<h3 class="font-bold mb-1">${post.title}</h3>
<p class="text-sm text-gray-600">${post.content}</p>
${imgHtml}
`;
container.appendChild(div);
});
}
</script>

</body>
</html>
