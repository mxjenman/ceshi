<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>AI Mobile OS</title>
<script src="https://cdn.tailwindcss.com"></script>

<style id="custom-style">
body { background: #f0f0f0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
.glass-card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border-radius: 24px; }
.app-icon { width: 60px; height: 60px; background: white; border-radius: 15px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.chat-msg-user { background: #95ec69; border-radius: 6px 0 6px 6px; }
.chat-msg-ai { background: white; border-radius: 0 6px 6px 6px; }

.widget-card{
width:100%;
border-radius:28px;
padding:20px;
background:linear-gradient(135deg,#ffffff,#f3f4f6);
box-shadow:0 8px 20px rgba(0,0,0,0.08);
position:relative;
}
.widget-avatar{
width:60px;height:60px;border-radius:50%;object-fit:cover;
border:3px solid white;box-shadow:0 4px 10px rgba(0,0,0,0.1);
}
.widget-emoji{font-size:14px;cursor:pointer;}
.widget-text{
position:absolute;bottom:15px;right:20px;
font-size:12px;color:#555;cursor:pointer;
}
</style>
</head>

<body class="h-screen overflow-hidden flex flex-col">

<!-- é¦–é¡µ -->
<div id="home-screen" class="flex-1 p-6 flex flex-col items-center">

<div class="widget-card mb-12 mt-4">
<div class="flex items-start gap-10">
<div class="flex flex-col items-center gap-1">
<span class="widget-emoji" onclick="editEmoji('left')">(â¸â¸à¹‘  Ì« à¹‘â¸â¸)</span>
<img id="avatar-left" class="widget-avatar"
src="https://i.postimg.cc/Qx8Y1m3R/IMG-2980.jpg"
onclick="changeAvatar('left')">
</div>
<div class="flex flex-col items-center gap-1">
<span class="widget-emoji" onclick="editEmoji('right')">(Ë¶âƒ Ï‰ âƒË¶)</span>
<img id="avatar-right" class="widget-avatar"
src="https://i.postimg.cc/Qx8Y1m3R/IMG-2980.jpg"
onclick="changeAvatar('right')">
</div>
</div>
<div id="widget-text" class="widget-text" onclick="editWidgetText()">
æˆ‘ä¸æƒ³éš”ç€å±å¹•å’Œä½ è¯´è¯
</div>
</div>

<div class="grid grid-cols-4 gap-6 w-full px-4">

<!-- å¾®ä¿¡ -->
<div class="col-span-4 flex justify-end">
<div class="flex flex-col items-center gap-1" onclick="openChat()">
<div class="app-icon overflow-hidden p-0">
<img src="https://i.postimg.cc/fycLsZLY/quality-restoration-20260228193355205.png"
class="w-full h-full object-cover rounded-[15px]">
</div>
<span class="text-xs text-gray-600">å¾®ä¿¡</span>
</div>
</div>

<!-- è®ºå› -->
<div class="col-span-4 flex justify-end">
<div class="flex flex-col items-center gap-1" onclick="openForum()">
<div class="app-icon overflow-hidden p-0">
<img src="https://i.postimg.cc/ZnjMz01G/quality-restoration-20260228202408361.png"
class="w-full h-full object-cover rounded-[15px]">
</div>
<span class="text-xs text-gray-600">è®ºå›</span>
</div>
</div>

</div>

<div class="mt-auto glass-card w-full py-4 px-8 flex justify-between items-center mb-4"
style="transform: translateY(20px);">
<button onclick="openModal('settings')" class="flex flex-col items-center">
<span class="text-xl">âš™ï¸</span><span class="text-[10px]">è®¾ç½®</span>
</button>
<button onclick="openModal('beauty')" class="flex flex-col items-center">
<span class="text-xl">ğŸ¨</span><span class="text-[10px]">ç¾åŒ–</span>
</button>
<button onclick="openModal('presets')" class="flex flex-col items-center">
<span class="text-xl">ğŸ“‘</span><span class="text-[10px]">é¢„è®¾</span>
</button>
</div>
</div>

<!-- å¾®ä¿¡èŠå¤©ç•Œé¢ -->
<div id="chat-screen" class="fixed inset-0 bg-[#ededed] hidden flex flex-col z-50">
<div class="h-12 bg-[#ededed] flex items-center px-4 border-b border-gray-200">
<button onclick="closeChat()" class="text-xl">ã€ˆ</button>
<div class="flex-1 text-center font-bold">AI å¥½å‹</div>
<div class="w-6"></div>
</div>
<div id="chat-flow" class="flex-1 overflow-y-auto p-4 space-y-4"></div>
<div class="p-3 bg-[#f7f7f7] border-t flex flex-col gap-2">
<div class="flex gap-2">
<input id="chat-input" type="text" class="flex-1 border-none rounded bg-white px-3 py-2 outline-none" placeholder="è¾“å…¥æ¶ˆæ¯...">
<button onclick="sendUserMsg()" class="bg-green-600 text-white px-4 py-2 rounded">å‘é€</button>
</div>
<button onclick="triggerAI()" id="gen-btn" class="w-full bg-blue-500 text-white py-1 rounded text-sm">ç‚¹å‡»ç”Ÿæˆå¯¹æ–¹å›å¤</button>
</div>
</div>

<!-- è®ºå›ç•Œé¢ -->
<div id="forum-screen" class="fixed inset-0 bg-white hidden flex flex-col z-50">

<div class="h-12 bg-white flex items-center px-4 border-b relative">
<button onclick="closeForum()" class="text-xl">ã€ˆ</button>
<div class="flex-1 text-center font-bold">è®ºå›</div>
<button onclick="generateForumPosts()" class="absolute right-4 text-xl">ğŸ”„</button>
</div>

<div id="forum-flow" class="flex-1 overflow-y-auto p-4 space-y-4"></div>

<button onclick="createPost()"
class="fixed bottom-24 right-6 w-14 h-14 bg-black text-white text-3xl rounded-full shadow-lg flex items-center justify-center">
+
</button>

</div>

<script>
let config={baseUrl:'https://api.openai.com/v1',apiKey:'',model:'gpt-3.5-turbo',customCss:'',systemPrompt:'ä½ æ˜¯ä¸€ä¸ªçœŸå®çš„å¾®ä¿¡å¥½å‹ï¼Œå›å¤æç®€ï¼Œæ§åˆ¶åœ¨20å­—å†…ã€‚'};
let chatHistory=[];
let forumPosts=[];

/* åŸºç¡€åŠŸèƒ½ */
function openForum(){document.getElementById('forum-screen').classList.remove('hidden');}
function closeForum(){document.getElementById('forum-screen').classList.add('hidden');}
function openChat(){document.getElementById('chat-screen').classList.remove('hidden');}
function closeChat(){document.getElementById('chat-screen').classList.add('hidden');}

function sendUserMsg(){
const input=document.getElementById('chat-input');
if(!input.value)return;
renderMsg(input.value,'user');
chatHistory.push({role:'user',content:input.value});
input.value='';
}

function renderMsg(text,role){
const container=document.getElementById('chat-flow');
const div=document.createElement('div');
div.className=`flex ${role==='user'?'justify-end':'justify-start'}`;
div.innerHTML=`<div class="max-w-[80%] px-3 py-2 shadow-sm text-sm ${role==='user'?'chat-msg-user':'chat-msg-ai'}">${text}</div>`;
container.appendChild(div);
container.scrollTop=container.scrollHeight;
}

/* è®ºå› */
function renderForum(){
const container=document.getElementById("forum-flow");
container.innerHTML="";
forumPosts.forEach(post=>{
const div=document.createElement("div");
div.className="p-4 bg-gray-100 rounded-xl shadow-sm";
div.innerHTML=`<h3 class="font-bold mb-1">${post.title}</h3>
<p class="text-sm text-gray-600">${post.content}</p>`;
container.appendChild(div);
});
}

function createPost(){
const title=prompt("è¾“å…¥æ ‡é¢˜");
if(!title)return;
const content=prompt("è¾“å…¥å†…å®¹");
if(!content)return;
forumPosts.unshift({title,content});
renderForum();
}

async function generateForumPosts(){
if(!config.apiKey){alert("è¯·å…ˆå¡«å†™API Key");return;}
const count=Math.floor(Math.random()*6)+10;
const promptText=`ç”Ÿæˆ${count}æ¡çœŸå®ç½‘å‹è®ºå›å¸–å­ï¼ŒJSONæ•°ç»„æ ¼å¼ï¼Œæ¯æ¡åŒ…å«titleå’Œcontentã€‚ä¸è¦è§£é‡Šã€‚`;
try{
const response=await fetch(`${config.baseUrl}/chat/completions`,{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${config.apiKey}`},
body:JSON.stringify({
model:config.model,
messages:[{role:"user",content:promptText}],
temperature:0.9
})
});
const data=await response.json();
const json=JSON.parse(data.choices[0].message.content);
forumPosts=json;
renderForum();
}catch(e){alert("ç”Ÿæˆå¤±è´¥");}
}
</script>

</body>
</html>
